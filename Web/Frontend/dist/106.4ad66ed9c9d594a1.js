"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[106],{4106:(X,A,o)=>{o.r(A),o.d(A,{AppListComponent:()=>m});var d=o(8692),e=o(6985),a=o(9900),v=o(7352),I=o(4813);class b extends I.w0{constructor(r,t){super()}schedule(r,t=0){return this}}const c={setInterval(s,r,...t){const{delegate:n}=c;return n?.setInterval?n.setInterval(s,r,...t):setInterval(s,r,...t)},clearInterval(s){const{delegate:r}=c;return(r?.clearInterval||clearInterval)(s)},delegate:void 0};var C=o(8308);const _={now:()=>(_.delegate||Date).now(),delegate:void 0};class u{constructor(r,t=u.now){this.schedulerActionCtor=r,this.now=t}schedule(r,t=0,n){return new this.schedulerActionCtor(this,r).schedule(n,t)}}u.now=_.now;const L=new class G extends u{constructor(r,t=u.now){super(r,t),this.actions=[],this._active=!1}flush(r){const{actions:t}=this;if(this._active)return void t.push(r);let n;this._active=!0;do{if(n=r.execute(r.state,r.delay))break}while(r=t.shift());if(this._active=!1,n){for(;r=t.shift();)r.unsubscribe();throw n}}}(class J extends b{constructor(r,t){super(r,t),this.scheduler=r,this.work=t,this.pending=!1}schedule(r,t=0){var n;if(this.closed)return this;this.state=r;const i=this.id,l=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(l,i,t)),this.pending=!0,this.delay=t,this.id=null!==(n=this.id)&&void 0!==n?n:this.requestAsyncId(l,this.id,t),this}requestAsyncId(r,t,n=0){return c.setInterval(r.flush.bind(r,this),n)}recycleAsyncId(r,t,n=0){if(null!=n&&this.delay===n&&!1===this.pending)return t;null!=t&&c.clearInterval(t)}execute(r,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(r,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(r,t){let i,n=!1;try{this.work(r)}catch(l){n=!0,i=l||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:r,scheduler:t}=this,{actions:n}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,C.P)(n,this),null!=r&&(this.id=this.recycleAsyncId(t,r,null)),this.delay=null,super.unsubscribe()}}});var N=o(2085),U=o(8499),O=o(1606),x=o(5856);function Q(s,r){1&s&&e._UZ(0,"span",3)}function F(s,r){1&s&&e._UZ(0,"span",4)}class h{changed=new e.vpe;order;property;text;click(){this.order=this.order??new x.D,this.order.property=this.property,this.order.ascending=!this.order.ascending,this.changed.emit()}static \u0275fac=function(t){return new(t||h)};static \u0275cmp=e.Xpm({type:h,selectors:[["app-order"]],inputs:{order:"order",property:"property",text:"text"},outputs:{changed:"changed"},standalone:!0,features:[e.jDz],decls:4,vars:3,consts:[[1,"uk-link-muted",3,"click"],["uk-icon","icon: arrow-up",4,"ngIf"],["uk-icon","icon: arrow-down",4,"ngIf"],["uk-icon","icon: arrow-up"],["uk-icon","icon: arrow-down"]],template:function(t,n){1&t&&(e.TgZ(0,"a",0),e.NdJ("click",function(){return n.click()}),e._uU(1),e.qZA(),e.YNc(2,Q,1,0,"span",1),e.YNc(3,F,1,0,"span",2)),2&t&&(e.xp6(1),e.Oqu(n.text),e.xp6(1),e.Q6J("ngIf",(null==n.order?null:n.order.property)===n.property&&!(null!=n.order&&n.order.ascending)),e.xp6(1),e.Q6J("ngIf",(null==n.order?null:n.order.property)===n.property&&(null==n.order?null:n.order.ascending)))},dependencies:[d.ez,d.O5],encapsulation:2})}var Z=o(8236);function P(s,r){if(1&s){const t=e.EpF();e.TgZ(0,"div",1)(1,"button",2),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.change(1))}),e._uU(2,"First"),e.qZA(),e.TgZ(3,"button",3),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.change(i.page.index-1))}),e._uU(4,"Previous"),e.qZA(),e.TgZ(5,"span",4),e._uU(6),e.qZA(),e.TgZ(7,"button",3),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.change(i.page.index+1))}),e._uU(8,"Next"),e.qZA(),e.TgZ(9,"button",3),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.change(i.pages))}),e._uU(10,"Last"),e.qZA()()}if(2&s){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.page.index<=1),e.xp6(2),e.Q6J("disabled",t.page.index<=1),e.xp6(3),e.AsE("",t.page.index," of ",t.pages,""),e.xp6(1),e.Q6J("disabled",t.page.index>=t.pages),e.xp6(2),e.Q6J("disabled",t.page.index>=t.pages)}}class g{get count(){return this._count}set count(r){this._count=r,this.setPages()}get page(){return this._page}set page(r){this._page=r,this.setPages()}changed=new e.vpe;pages=0;_count=0;_page=new Z.L;change(r){this.page.index=r,this.changed.emit()}setPages(){this.pages=Math.ceil(this.count/this.page.size)}static \u0275fac=function(t){return new(t||g)};static \u0275cmp=e.Xpm({type:g,selectors:[["app-page"]],inputs:{count:"count",page:"page"},outputs:{changed:"changed"},standalone:!0,features:[e.jDz],decls:1,vars:1,consts:[["class","uk-text-center",4,"ngIf"],[1,"uk-text-center"],[1,"uk-button","uk-button-default","uk-button-small",3,"disabled","click"],[1,"uk-button","uk-button-default","uk-button-small","uk-margin-small-left",3,"disabled","click"],[1,"uk-margin-small-left"]],template:function(t,n){1&t&&e.YNc(0,P,11,6,"div",0),2&t&&e.Q6J("ngIf",n.pages>1)},dependencies:[d.ez,d.O5],encapsulation:2})}var Y=o(4719);class y{filters=new Y.t;order=new x.D;page=new Z.L}class S{count=0;list=new Array;parameters=new y}var M=o(2515),z=o(7556);function D(s,r){1&s&&e._UZ(0,"th")}function E(s,r){if(1&s&&(e.TgZ(0,"td",16)(1,"button",17),e._uU(2,"Edit"),e.qZA(),e.TgZ(3,"button",18),e._uU(4,"Delete"),e.qZA()()),2&s){const t=e.oxw().$implicit;e.xp6(1),e.MGl("routerLink","/film/edit/",t.id,""),e.xp6(2),e.MGl("routerLink","/film/delete/",t.id,"")}}function H(s,r){if(1&s&&(e.TgZ(0,"tr")(1,"td",2)(2,"a",14),e._uU(3),e.qZA()(),e.TgZ(4,"td"),e._uU(5),e.qZA(),e.TgZ(6,"td"),e._uU(7),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.YNc(10,E,5,2,"td",15),e.qZA()),2&s){const t=r.$implicit,n=e.oxw();e.xp6(2),e.MGl("routerLink","/film/detail/",t.id,""),e.xp6(1),e.Oqu(null==t?null:t.id),e.xp6(2),e.Oqu(null==t?null:t.title),e.xp6(2),e.Oqu(null==t?null:t.year),e.xp6(2),e.Oqu(null==t?null:t.genre),e.xp6(1),e.Q6J("ngIf",n.userLoggedIn)}}class f{appFilmService;appAuthService;filters=(0,e.f3M)(a.qu).group({Id:new a.NI,Title:new a.NI,Year:new a.NI,Genre:new a.NI});grid=new S;userLoggedIn=!1;constructor(r,t){this.appFilmService=r,this.appAuthService=t,this.init()}load(){this.appFilmService.grid(this.grid.parameters).subscribe(r=>this.grid=r)}filter(){this.grid.parameters=new y,this.grid.parameters.filters.addFromFormGroup(this.filters),this.load()}init(){this.grid.parameters.order.property="Id",this.filters.valueChanges.pipe(function q(s,r=L){return(0,N.e)((t,n)=>{let i=null,l=null,T=null;const k=()=>{if(i){i.unsubscribe(),i=null;const p=l;l=null,n.next(p)}};function K(){const p=T+s,w=r.now();if(w<p)return i=this.schedule(void 0,p-w),void n.add(i);k()}t.subscribe((0,U.x)(n,p=>{l=p,T=r.now(),i||(i=r.schedule(K,s),n.add(i))},()=>{k(),n.complete()},void 0,()=>{l=i=null}))})}(0)).subscribe(()=>this.filter()),this.userLoggedIn=this.appAuthService.authenticated(),this.load()}static \u0275fac=function(t){return new(t||f)(e.Y36(M.O),e.Y36(z.K))};static \u0275cmp=e.Xpm({type:f,selectors:[["app-list-grid"]],standalone:!0,features:[e.jDz],decls:20,vars:9,consts:[[3,"formGroup"],[1,"uk-table","uk-table-divider","uk-table-hover","uk-table-small","uk-table-striped"],[1,"uk-text-center@m"],["property","Id","text","Id",3,"order","changed"],["formControlName","Id","text","Id",1,"uk-text-center"],["property","Title","text","Title",3,"order","changed"],["formControlName","Title","text","Title"],["property","Year","text","Year",3,"order","changed"],["formControlName","Year","text","Year"],["property","Genre","text","Genre",3,"order","changed"],["formControlName","Genre","text","Genre"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"page","count","changed"],[3,"routerLink"],["class","uk-button-group",4,"ngIf"],[1,"uk-button-group"],[1,"uk-button","uk-button-primary",3,"routerLink"],[1,"uk-button","uk-button-secondary",3,"routerLink"]],template:function(t,n){1&t&&(e.TgZ(0,"form",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2)(5,"app-order",3),e.NdJ("changed",function(){return n.load()}),e.qZA(),e._UZ(6,"app-input-text",4),e.qZA(),e.TgZ(7,"th")(8,"app-order",5),e.NdJ("changed",function(){return n.load()}),e.qZA(),e._UZ(9,"app-input-text",6),e.qZA(),e.TgZ(10,"th")(11,"app-order",7),e.NdJ("changed",function(){return n.load()}),e.qZA(),e._UZ(12,"app-input-text",8),e.qZA(),e.TgZ(13,"th")(14,"app-order",9),e.NdJ("changed",function(){return n.load()}),e.qZA(),e._UZ(15,"app-input-text",10),e.qZA(),e.YNc(16,D,1,0,"th",11),e.qZA()(),e.TgZ(17,"tbody"),e.YNc(18,H,11,6,"tr",12),e.qZA()()(),e.TgZ(19,"app-page",13),e.NdJ("changed",function(){return n.load()}),e.qZA()),2&t&&(e.Q6J("formGroup",n.filters),e.xp6(5),e.Q6J("order",n.grid.parameters.order),e.xp6(3),e.Q6J("order",n.grid.parameters.order),e.xp6(3),e.Q6J("order",n.grid.parameters.order),e.xp6(3),e.Q6J("order",n.grid.parameters.order),e.xp6(2),e.Q6J("ngIf",n.userLoggedIn),e.xp6(2),e.Q6J("ngForOf",n.grid.list),e.xp6(1),e.Q6J("page",n.grid.parameters.page)("count",n.grid.count))},dependencies:[d.ez,d.sg,d.O5,v.Bz,v.rH,a.UX,a._Y,a.JJ,a.JL,a.sg,a.u,h,g,O.a],encapsulation:2})}class m{static \u0275fac=function(t){return new(t||m)};static \u0275cmp=e.Xpm({type:m,selectors:[["app-list"]],standalone:!0,features:[e.jDz],decls:1,vars:0,template:function(t,n){1&t&&e._UZ(0,"app-list-grid")},dependencies:[v.Bz,f],encapsulation:2})}}}]);